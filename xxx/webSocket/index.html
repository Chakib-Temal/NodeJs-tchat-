<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Socket.io</title>
    </head>
 
    <body>
        <h1>Communication avec socket.io !</h1>
        <p><input type="button" value="envoyer le message" id="poke" /></p>
        <input type="text" name="text" id="zzz">
        <input type="text" name="tchat" id="zez">

        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var tchat;
            $('#zzz').on('input', function(e){
                tchat = ($(this).val());
            })
            var socket = io.connect('http://localhost:3333');
            
            
            socket.on('message', function(message) {
             alert('Le serveur a un message pour vous : ' + message);
             });

            socket.on('messages', function(messages) {
                $('#zez').val('');
                $('#zez').val(messages);
             });

           // socket.on('news_by_server', function(data){
             //   alert(data);
            // });

          //  setInterval(function(){
    
            // socket.emit('news_by_server', tchat); 
            // }, 1000);

            // stocker dans la session ....
            var pseudo = prompt('Quel est votre pseudo ?');
            socket.emit('petit_nouveau', pseudo);


            $('#poke').click(function () {
                socket.emit('message', tchat);
            })

        </script>
    </body>
</html>